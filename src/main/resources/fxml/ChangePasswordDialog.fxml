<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.controller.ChangePasswordDialogController"
        spacing="20"
        stylesheets="@/css/password-dialog.css"
        prefWidth="450">

    <padding>
        <Insets top="25" right="30" bottom="25" left="30"/>
    </padding>

    <!-- Header -->
    <VBox spacing="8" alignment="CENTER">
        <Label text="ðŸ”’" styleClass="password-icon"/>
        <Label text="Changer le mot de passe" styleClass="dialog-title"/>
        <Label text="Assurez-vous d'utiliser un mot de passe fort et sÃ©curisÃ©"
               styleClass="dialog-subtitle" wrapText="true" textAlignment="CENTER"/>
    </VBox>

    <Separator/>

    <!-- Form -->
    <VBox spacing="20">

        <!-- Mot de passe actuel -->
        <VBox spacing="8">
            <Label text="Mot de passe actuel" styleClass="field-label-dialog"/>
            <HBox spacing="0" styleClass="password-field-container">
                <PasswordField fx:id="currentPasswordField"
                               promptText="Entrez votre mot de passe actuel"
                               styleClass="password-input"
                               HBox.hgrow="ALWAYS"/>
                <Button fx:id="toggleCurrentBtn"
                        text="ðŸ‘"
                        styleClass="toggle-password-btn"
                        onAction="#toggleCurrentPassword"/>
            </HBox>
            <Label fx:id="currentPasswordError"
                   styleClass="error-label"
                   visible="false"
                   managed="false"/>
        </VBox>

        <!-- Nouveau mot de passe -->
        <VBox spacing="8">
            <Label text="Nouveau mot de passe" styleClass="field-label-dialog"/>
            <HBox spacing="0" styleClass="password-field-container">
                <PasswordField fx:id="newPasswordField"
                               promptText="Minimum 6 caractÃ¨res"
                               styleClass="password-input"
                               HBox.hgrow="ALWAYS"/>
                <Button fx:id="toggleNewBtn"
                        text="ðŸ‘"
                        styleClass="toggle-password-btn"
                        onAction="#toggleNewPassword"/>
            </HBox>

            <!-- Indicateur de force du mot de passe -->
            <HBox spacing="5" alignment="CENTER_LEFT">
                <Label text="Force:" styleClass="strength-label"/>
                <ProgressBar fx:id="passwordStrengthBar"
                             prefWidth="200"
                             progress="0"
                             styleClass="strength-bar"/>
                <Label fx:id="strengthLabel"
                       text=""
                       styleClass="strength-text"/>
            </HBox>

            <Label fx:id="newPasswordError"
                   styleClass="error-label"
                   visible="false"
                   managed="false"/>
        </VBox>

        <!-- Confirmer mot de passe -->
        <VBox spacing="8">
            <Label text="Confirmer le mot de passe" styleClass="field-label-dialog"/>
            <HBox spacing="0" styleClass="password-field-container">
                <PasswordField fx:id="confirmPasswordField"
                               promptText="Retapez le nouveau mot de passe"
                               styleClass="password-input"
                               HBox.hgrow="ALWAYS"/>
                <Button fx:id="toggleConfirmBtn"
                        text="ðŸ‘"
                        styleClass="toggle-password-btn"
                        onAction="#toggleConfirmPassword"/>
            </HBox>
            <Label fx:id="confirmPasswordError"
                   styleClass="error-label"
                   visible="false"
                   managed="false"/>
        </VBox>

    </VBox>

    <!-- Conseils de sÃ©curitÃ© -->
    <VBox spacing="8" styleClass="tips-box">
        <Label text="ðŸ’¡ Conseils pour un mot de passe fort:" styleClass="tips-title"/>
        <Label text="â€¢ Au moins 6 caractÃ¨res (recommandÃ©: 8+)" styleClass="tips-item"/>
        <Label text="â€¢ MÃ©langez majuscules et minuscules" styleClass="tips-item"/>
        <Label text="â€¢ Incluez des chiffres et symboles" styleClass="tips-item"/>
        <Label text="â€¢ Ã‰vitez les informations personnelles" styleClass="tips-item"/>
    </VBox>

    <!-- Buttons -->
    <HBox spacing="15" alignment="CENTER">
        <padding>
            <Insets top="10" right="0" bottom="0" left="0"/>
        </padding>
        <Button text="Annuler"
                onAction="#handleCancel"
                styleClass="cancel-btn-dialog"
                prefWidth="120"/>
        <Button text="Modifier"
                onAction="#handleSave"
                    styleClass="save-btn-dialog"
                prefWidth="120"/>
    </HBox>

</VBox>
