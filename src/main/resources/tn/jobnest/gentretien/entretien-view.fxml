<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="tn.jobnest.gentretien.controller.Entretiencontroller"
            stylesheets="@styles.css"
            prefWidth="1400.0"
            prefHeight="850.0">

    <!-- SIDEBAR MODERNE -->
    <left>
        <VBox prefWidth="260" styleClass="sidebar" spacing="10">
            <padding>
                <Insets top="30" right="20" bottom="30" left="25"/>
            </padding>

            <!-- LOGO SIMPLE ET Ã‰LÃ‰GANT -->
            <HBox spacing="12" alignment="CENTER_LEFT" style="-fx-padding: 0 0 20 0;">
                <StackPane>
                    <Circle radius="18" fill="linear-gradient(to bottom right, #FF6B35, #FF8C5A)"/>
                    <Text text="JN"
                          fill="white"
                          style="-fx-font-family: 'Segoe UI'; -fx-font-size: 16px; -fx-font-weight: bold;"/>
                </StackPane>
                <Label text="JobNest" styleClass="logo"/>
            </HBox>

            <!-- Menu principal -->
            <VBox styleClass="menu-container" spacing="5" VBox.vgrow="ALWAYS">
                <!-- Tableau de bord -->
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“Š" style="-fx-font-size: 18px;"/>
                            <Label text="Tableau de bord" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Offres d'emploi -->
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ’¼" style="-fx-font-size: 18px;"/>
                            <Label text="Offres d'emploi" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Candidatures -->
                <Button styleClass="menu-item" onAction="#ouvrirCandidature">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“„" style="-fx-font-size: 18px;"/>
                            <Label text="Candidatures" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Entretiens (ACTIF) -->
                <Button styleClass="menu-item, menu-item-active">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“…" style="-fx-font-size: 18px;"/>
                            <Label text="Entretiens" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Feedbacks -->
                <Button styleClass="menu-item" onAction="#ouvrirFeedbacks">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“Š" style="-fx-font-size: 18px;"/>
                            <Label text="Feedbacks" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Matching -->
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸŽ¯" style="-fx-font-size: 18px;"/>
                            <Label text="Matching" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
            </VBox>

            <!-- Footer sidebar -->
            <VBox styleClass="sidebar-footer" spacing="10">
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="âš™ï¸" style="-fx-font-size: 18px;"/>
                            <Label text="ParamÃ¨tres" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸšª" style="-fx-font-size: 18px;"/>
                            <Label text="DÃ©connexion" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- CONTENU PRINCIPAL -->
    <center>
        <VBox spacing="20" style="-fx-background-color: #F5F7FB;">
            <padding>
                <Insets top="25" right="35" bottom="25" left="35"/>
            </padding>

            <!-- Header -->
            <Label text="Gestion des Entretiens" styleClass="page-title"/>
            <Label text="Planifiez et organisez vos entretiens en quelques clics" styleClass="page-subtitle"/>

            <!-- Barre de recherche et filtres -->
            <HBox spacing="15" alignment="CENTER_LEFT">
                <TextField fx:id="searchField"
                           promptText="Rechercher par candidat ou poste..."
                           prefWidth="360"
                           HBox.hgrow="ALWAYS"/>
                <ComboBox fx:id="comboType" prefWidth="180"/>
                <ComboBox fx:id="comboStatut" prefWidth="180"/>
                <Button text="+ Nouvel entretien"
                        onAction="#ajouterEntretien"
                        styleClass="button-add"
                        prefHeight="42"/>
                <Button text="ðŸ“Š Voir Feedbacks"
                        onAction="#ouvrirFeedbacks"
                        prefHeight="42"
                        prefWidth="160"
                        style="-fx-background-color: linear-gradient(from 0% 0% to 100% 0%, #9B59B6, #8E44AD);
                               -fx-text-fill: white;
                               -fx-font-size: 14px;
                               -fx-font-weight: bold;
                               -fx-background-radius: 12px;
                               -fx-cursor: hand;
                               -fx-effect: dropshadow(gaussian, rgba(155,89,182,0.3), 10, 0, 0, 3);"/>
            </HBox>

            <!-- Cartes statistiques -->
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox styleClass="stat-card">
                    <Label fx:id="planifiesCount" text="0" styleClass="stat-number"/>
                    <Label text="PlanifiÃ©s" styleClass="stat-label"/>
                </VBox>
                <VBox styleClass="stat-card">
                    <Label fx:id="terminesCount" text="0" styleClass="stat-number"/>
                    <Label text="TerminÃ©s" styleClass="stat-label"/>
                </VBox>
                <VBox styleClass="stat-card">
                    <Label fx:id="semaineCount" text="0" styleClass="stat-number"/>
                    <Label text="Cette semaine" styleClass="stat-label"/>
                </VBox>
            </HBox>

            <!-- Section Prochains entretiens -->
            <Label text="Prochains entretiens" styleClass="section-title"/>

            <!-- Liste des entretiens avec ScrollPane -->
            <ScrollPane fitToWidth="true"
                        prefHeight="600.0"
                        style="-fx-background: transparent; -fx-background-color: transparent; -fx-border-color: transparent;"
                        VBox.vgrow="ALWAYS">
                <VBox fx:id="entretiensVBox" spacing="12"
                      style="-fx-background-color: transparent;"/>
            </ScrollPane>
        </VBox>
    </center>
</BorderPane>
