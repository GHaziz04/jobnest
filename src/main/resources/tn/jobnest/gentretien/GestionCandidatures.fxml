<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="tn.jobnest.gentretien.controller.GestionCandidaturesController"
            stylesheets="@styles.css"
            prefWidth="1400.0"
            prefHeight="850.0">

    <!-- SIDEBAR â€” MÃŠME STYLE QUE entretien-view.fxml -->
    <left>
        <VBox prefWidth="260" styleClass="sidebar" spacing="10">
            <padding>
                <Insets top="30" right="20" bottom="30" left="25"/>
            </padding>

            <!-- LOGO -->
            <HBox spacing="12" alignment="CENTER_LEFT" style="-fx-padding: 0 0 20 0;">
                <StackPane>
                    <Circle radius="18" fill="#F97316"/>
                    <Text text="JN"
                          fill="white"
                          style="-fx-font-family: 'Segoe UI'; -fx-font-size: 16px; -fx-font-weight: bold;"/>
                </StackPane>
                <Label text="JobNest" styleClass="logo"/>
            </HBox>

            <!-- Menu principal -->
            <VBox styleClass="menu-container" spacing="5" VBox.vgrow="ALWAYS">

                <!-- Tableau de bord -->
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“Š" style="-fx-font-size: 18px;"/>
                            <Label text="Tableau de bord" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Offres d'emploi -->
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ’¼" style="-fx-font-size: 18px;"/>
                            <Label text="Offres d'emploi" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Candidatures (ACTIF) -->
                <Button styleClass="menu-item, menu-item-active">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“„" style="-fx-font-size: 18px;"/>
                            <Label text="Candidatures" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Entretiens -->
                <Button styleClass="menu-item" onAction="#ouvrirEntretiens">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“…" style="-fx-font-size: 18px;"/>
                            <Label text="Entretiens" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Feedbacks -->
                <Button styleClass="menu-item" onAction="#ouvrirFeedbacks">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸ“Š" style="-fx-font-size: 18px;"/>
                            <Label text="Feedbacks" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

                <!-- Matching -->
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸŽ¯" style="-fx-font-size: 18px;"/>
                            <Label text="Matching" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>

            </VBox>

            <!-- Footer sidebar -->
            <VBox styleClass="sidebar-footer" spacing="10">
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="âš™ï¸" style="-fx-font-size: 18px;"/>
                            <Label text="ParamÃ¨tres" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
                <Button styleClass="menu-item">
                    <graphic>
                        <HBox spacing="15" alignment="CENTER_LEFT">
                            <Text text="ðŸšª" style="-fx-font-size: 18px;"/>
                            <Label text="DÃ©connexion" style="-fx-text-fill: inherit; -fx-font-size: 14px;"/>
                        </HBox>
                    </graphic>
                </Button>
            </VBox>
        </VBox>
    </left>

    <!-- CONTENU PRINCIPAL -->
    <center>
        <VBox spacing="20" style="-fx-background-color: #F5F7FB;">
            <padding>
                <Insets top="25" right="35" bottom="25" left="35"/>
            </padding>

            <!-- Header -->
            <Label text="Tableau des Candidatures" styleClass="page-title"/>
            <Label text="GÃ©rez les postulants et suivez l'Ã©volution des recrutements" styleClass="page-subtitle"/>

            <!-- Barre de recherche -->
            <HBox spacing="15" alignment="CENTER_LEFT">
                <TextField fx:id="searchField"
                           promptText="Rechercher par candidat ou offre..."
                           prefWidth="360"
                           HBox.hgrow="ALWAYS"/>
                <Button text="ðŸ”„ Actualiser"
                        onAction="#rafraichirListe"
                        prefHeight="42"
                        style="-fx-background-color: white;
                               -fx-text-fill: #1E3A5F;
                               -fx-font-weight: bold;
                               -fx-font-size: 13px;
                               -fx-padding: 10 20;
                               -fx-background-radius: 12;
                               -fx-border-color: #E2E8F0;
                               -fx-border-radius: 12;
                               -fx-border-width: 1.5;
                               -fx-cursor: hand;"/>
            </HBox>

            <!-- Cartes statistiques â€” mÃªme style que entretien -->
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox styleClass="stat-card">
                    <Label fx:id="totalCandidaturesLabel" text="0" styleClass="stat-number"/>
                    <Label text="Total Candidats" styleClass="stat-label"/>
                </VBox>
                <VBox styleClass="stat-card">
                    <Label fx:id="boostedLabel" text="0"
                           style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #7C3AED;"/>
                    <Label text="Profils BoostÃ©s" styleClass="stat-label"/>
                </VBox>
                <VBox styleClass="stat-card">
                    <Label fx:id="enAttenteLabel" text="0"
                           style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: #F97316;"/>
                    <Label text="En Attente" styleClass="stat-label"/>
                </VBox>
            </HBox>

            <!-- Titre section liste -->
            <Label text="Liste des candidatures" styleClass="section-title"/>

            <!-- Liste des candidatures avec ScrollPane â€” mÃªme structure que entretien -->
            <ScrollPane fitToWidth="true"
                        prefHeight="600.0"
                        style="-fx-background: transparent; -fx-background-color: transparent; -fx-border-color: transparent;"
                        VBox.vgrow="ALWAYS">
                <VBox fx:id="vboxCandidatures" spacing="12"
                      style="-fx-background-color: transparent;"/>
            </ScrollPane>

        </VBox>
    </center>
</BorderPane>
